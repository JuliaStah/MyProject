(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8807],{78807:function(e,t,a){"use strict";a.d(t,{x:function(){return D}});var l=a(85893),s=a(67294),r=a(81043),c=a(94184),o=a.n(c),n=a(35847),i=a(16995),d=a(42874),_=a(84990),x=a(17087),u=a(89836),p=a(33456),m=a.n(p);let h=({id:e,loading:t,actionTitle:a,setVisibleCartPanel:r,totalPrice:c,onAction:o,disabled:i})=>{let d=(0,x.N)(),p=(0,x.N)(),h=(0,_.a)("(min-width:1024px)"),j=()=>{o()};return(0,s.useEffect)(()=>{h||r?.(!d.inViewport||!p.inViewport)},[d.inViewport,p.inViewport,r,h,]),(0,l.jsxs)(l.Fragment,{children:[d.element,(0,l.jsx)(u.z,{id:e,type:"button",themes:["square-orange","full-width"],onClick:i?void 0:j,disabled:t||c<1||i,className:m().totalBtn,busyType:"tripleDots",isBusy:t,isWhiteDots:!0,children:!t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-button-big white lowercase",children:a}),(0,l.jsx)(n.J,{width:18,height:18,color:"white",src:"./arrow-2.svg"})]})}),p.element]})};var j=a(41664),f=a.n(j),N=a(90653),k=a.n(N);let v=({classNameAgreement:e})=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:o()(k().agreement,e,"text-b3"),children:["Нажимая кнопку \xabПодтвердить заказ\xbb, вы\xa0соглашаетесь c"," ",(0,l.jsx)(f(),{href:"/user-agreement",children:(0,l.jsx)("a",{className:"link",target:"_blank",children:"Условиями пользования"})})," ","и\xa0",(0,l.jsx)(f(),{href:"/confidenciality",children:(0,l.jsx)("a",{className:"link",target:"_blank",children:"Политикой обработки персональных данных"})})]}),(0,l.jsxs)("span",{className:o()(k().agreement,e,"text-b3"),children:["Нажимая на кнопку \xabСохранить карту\xbb, вы соглашаетесь с"," ",(0,l.jsx)(f(),{href:"/binding-rules",children:(0,l.jsx)("a",{className:"link",target:"_blank",children:"Условиями привязки и использования карты"})})]})]});var g=a(89200);let y=({title:e,price:t,currency:a})=>{let s="Оплата бонусами"===e;return(0,l.jsxs)("div",{className:k().totalItem,children:[(0,l.jsx)("span",{className:o()(k().totalKey,"text-interface"),children:e}),(0,l.jsx)("span",{className:o()(k().totalValue,"text-interface",{[k().totalDiscount]:s}),children:s?"–"+(0,g.W)(t,a):(0,g.W)(t,a)})]})};var b=a(24794),B=a(14465),I=a.n(B);let V=({icon:e,text:t,themes:a,preWrap:s})=>(0,l.jsxs)("div",{className:o()(I().root,a.reduce((e,t)=>e+=`${I()[`theme-${t}`]} `," ")),children:[(0,l.jsx)("div",{className:o()(I().wrapper),children:(0,l.jsx)("div",{className:o()(I().block),children:e})}),(0,l.jsx)("p",{className:o()("text-interface",s?I().preWrap:""),children:t})]});var w=s.memo(V),T=a(91801),W=a(15810);let D=({total:e,actionTitle:t,preloader:a,onAction:s,bonuses:c,userId:_,cartId:x,promocode:u,onPromocodeApply:p,className:m="",classNameAgreement:j,setVisibleCartPanel:f,expressDeliveryPrice:N})=>{let g=(0,T.q)({total:e,bonuses:c,expressDeliveryPrice:N}),{isCheckout:B,productsMeasures:I,oldPriceValue:V,currency:D,precheckData:K,useBonuses:F,numberOfBonuses:P,canPayWithBonusesSum:q,totalPrice:$,priceValue:A,totalDiscount:C}=g,E=(0,r.v9)(W.k1),J=E?.petcoin_enabled;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:o()(k().wrapper,m),children:[!B&&(0,l.jsx)("div",{className:k().infoBlockWrapper,children:(0,l.jsx)("div",{className:k().infoBlock,children:(0,l.jsx)(w,{icon:(0,l.jsx)(n.J,{width:24,height:24,src:"./icon-percent.svg"}),themes:["gray"],text:J?"Применить промокод\nи пет-коины можно при оформлении заказа":"Применить промокод можно при оформлении заказа",preWrap:!0})})}),(0,l.jsxs)("div",{className:k().total,children:[(0,l.jsxs)("div",{className:k().totalBlock,children:[(0,l.jsxs)("div",{className:k().totalItem,children:[(0,l.jsx)("span",{id:"cart_total_products_title",className:o()(k().totalKey,"text-interface"),children:`Товары ${I}`}),(!!V||B)&&(0,l.jsx)("span",{id:"cart_total_products_value",className:o()(k().totalValue,"text-interface"),children:(0,b.D)(V||A)})]}),C>0&&e.price.priceValue>0&&(0,l.jsxs)("div",{className:k().totalItem,children:[(0,l.jsx)("span",{id:"cart_discount_products_title",className:o()(k().totalKey,"text-interface"),children:"Скидка"}),(0,l.jsx)("span",{id:"cart_discount_products_value",className:o()(k().totalValue,"text-interface",k().totalDiscount),children:"– "+(0,b.D)(C)})]}),B&&(0,l.jsx)(y,{title:"Доставка",price:N||K.total.deliveryPrice,currency:D}),F&&B&&e.price.priceValue>0&&(0,l.jsx)(y,{title:"Оплата бонусами",price:q,currency:D})]}),(0,l.jsxs)("div",{className:k().totalBlock,children:[(0,l.jsxs)("div",{className:k().totalItem,children:[(0,l.jsx)("span",{className:o()(k().totalKey,"text-price-small-total"),children:"итого"}),(0,l.jsx)("span",{id:"cart_total_products_price",className:o()(k().totalValue,"text-price-small-total"),children:$>0?(0,b.D)($):(0,b.D)(0)})]}),!!c&&$>0&&(0,l.jsxs)("div",{className:k().totalItem,children:[(0,l.jsx)("span",{className:o()(k().totalKey,"text-interface gray-dark"),children:"Бонусы за заказ"}),(0,l.jsxs)("span",{id:"cart_bonuses_for_order_value",className:o()(k().totalValue,"text-interface gray-dark",k().totalBonus),children:["+",P]})]}),(0,l.jsx)("div",{className:o()(k().totalKey,"text-interface gray-dark"),children:!B&&"Без учёта стоимости доставки"}),e?.petcoinBalance?.accrued!=null&&e?.petcoinBalance?.accrued>0&&(0,l.jsxs)("div",{className:k().totalItem,children:[(0,l.jsx)("span",{className:o()(k().totalKey,"text-interface gray-dark"),children:"Пет-коины за заказ"}),(0,l.jsxs)("span",{id:"cart_petcoins_for_order_value",className:o()(k().totalValue,k().totalValuePetcoin,"text-interface gray-dark"),children:[(0,l.jsxs)("span",{children:["+",e.petcoinBalance.accrued]}),(0,l.jsx)("div",{className:k().totalValuePetcoinImg,children:(0,l.jsx)(i.j,{width:22,height:20,fill:!0})})]})]})]})]}),B&&$>0&&(0,l.jsx)("div",{className:k().promocodeInput,children:(0,l.jsx)(d.J,{userId:_??0,cartId:x??"",promocode:u,onApply:p})}),(0,l.jsx)(h,{loading:a,disabled:!!K?.total?.error9944,actionTitle:t,totalPrice:$,onAction:s,setVisibleCartPanel:f,id:"cart_make_order_button"})]}),B&&(0,l.jsx)(v,{classNameAgreement:j})]})}},91801:function(e,t,a){"use strict";a.d(t,{q:function(){return o}});var l=a(81043),s=a(11163),r=a(86409),c=a(47426);let o=({total:e,bonuses:t,expressDeliveryPrice:a})=>{let{pathname:o}=(0,s.useRouter)(),n=(0,l.v9)(c.os),i=(0,l.v9)(c.Qg),{price:d,quantity:_,measure:x,weight:u,canPayWithBonusesSum:p,totalDiscount:m}=e,{currency:h,oldPriceValue:j,priceValue:f}=d,N=o.includes("checkout"),k=_>0?`(${_}) \xb7 ${u.toFixed(2)} ${x}`:"",v=+(j-f).toFixed(2),g=n?.total?.deliveryPrice||0,y=(0,r.L)(t,!0),b=N?+(f+(a||g)-(i?p:0)).toFixed(2):f;return{isCheckout:N,currency:h,productsMeasures:k,promocodeDiscount:v,numberOfBonuses:y,totalPrice:b,oldPriceValue:j,precheckData:n,useBonuses:i,canPayWithBonusesSum:p,priceValue:f,totalDiscount:m}}},24794:function(e,t,a){"use strict";a.d(t,{D:function(){return s}});var l=a(89200);let s=e=>{if(Number.isInteger(e))return(0,l.W)(e);{let t=e.toFixed(2);return(0,l.W)(Math.floor(10*Number(t))/10)}}},33456:function(e){e.exports={totalBtn:"ActionButton_totalBtn___IPky"}},90653:function(e){e.exports={wrapper:"Total_wrapper__HY0uN",totalBlock:"Total_totalBlock__6LqTe",totalItem:"Total_totalItem__rSh__",totalKey:"Total_totalKey__uK_YE",totalValue:"Total_totalValue__fcW40",totalValuePetcoin:"Total_totalValuePetcoin__0D0_6",totalValuePetcoinImg:"Total_totalValuePetcoinImg__p3lOF",totalDiscount:"Total_totalDiscount__9Rx7S",totalBonus:"Total_totalBonus__r_jeK",infoBlock:"Total_infoBlock__NmNhm",infoBlockWrapper:"Total_infoBlockWrapper__VV6Dq",agreement:"Total_agreement__dTsNj",promocodeInput:"Total_promocodeInput__UlydA",fixed:"Total_fixed__JCxlL",orderButton:"Total_orderButton____Fqn"}},14465:function(e){e.exports={root:"InfoBlock_root__9dTVi","theme-gray":"InfoBlock_theme-gray__WxHT_","theme-yellow":"InfoBlock_theme-yellow__Z4Oqu",wrapper:"InfoBlock_wrapper__eKW93",block:"InfoBlock_block__szlWt",preWrap:"InfoBlock_preWrap__8OhGV"}}}]);